<!-- Sidebar Navigation Component -->
<aside class="sidebar" id="sidebar" role="navigation" aria-label="Primary sidebar navigation">
  <div class="sidebar-header">
    <div class="logo" role="img" aria-label="Inventory Management System logo">
      <i class="bi bi-boxes" aria-hidden="true"></i>
      <span class="logo-text">Inventory</span>
    </div>
    <button
      class="sidebar-toggle d-lg-none"
      id="sidebarToggle"
      aria-label="Close sidebar"
      aria-expanded="true"
      aria-controls="sidebar"
    >
      <i class="bi bi-x-lg" aria-hidden="true"></i>
    </button>
  </div>

  <nav class="sidebar-nav">
    <ul class="nav-list" role="list">
      <!-- Dashboard -->
      <li class="nav-item" role="listitem">
        <a
          href="{{ url_for('dashboard.index') }}"
          class="nav-link {% if request.endpoint == 'dashboard.index' %}active{% endif %}"
          {% if request.endpoint == 'dashboard.index' %}aria-current="page"{% endif %}
        >
          <i class="bi bi-speedometer2" aria-hidden="true"></i>
          <span class="nav-text">Dashboard</span>
        </a>
      </li>

      <!-- Inventory Section -->
      <li class="nav-section" role="presentation">
        <h3 class="nav-section-title">Inventory</h3>
      </li>

      <li class="nav-item" role="listitem">
        <a
          href="{{ url_for('products.list_products') }}"
          class="nav-link {% if request.endpoint and 'products' in request.endpoint %}active{% endif %}"
          {% if request.endpoint and 'products' in request.endpoint %}aria-current="page"{% endif %}
        >
          <i class="bi bi-box-seam" aria-hidden="true"></i>
          <span class="nav-text">Products</span>
        </a>
      </li>

      <li class="nav-item" role="listitem">
        <a
          href="{{ url_for('warehouses.list_warehouses') }}"
          class="nav-link {% if request.endpoint and 'warehouses' in request.endpoint %}active{% endif %}"
          {% if request.endpoint and 'warehouses' in request.endpoint %}aria-current="page"{% endif %}
        >
          <i class="bi bi-building" aria-hidden="true"></i>
          <span class="nav-text">Warehouses</span>
        </a>
      </li>

      <li class="nav-item" role="listitem">
        <a
          href="{{ url_for('stock.view_stock_levels') }}"
          class="nav-link {% if request.endpoint and 'stock' in request.endpoint %}active{% endif %}"
          {% if request.endpoint and 'stock' in request.endpoint %}aria-current="page"{% endif %}
        >
          <i class="bi bi-stack" aria-hidden="true"></i>
          <span class="nav-text">Stock Levels</span>
        </a>
      </li>

      <!-- Operations Section -->
      <li class="nav-section" role="presentation">
        <h3 class="nav-section-title">Operations</h3>
      </li>

      <li class="nav-item" role="listitem">
        <a
          href="{{ url_for('receipts.list_receipts') }}"
          class="nav-link {% if request.endpoint and 'receipts' in request.endpoint %}active{% endif %}"
          {% if request.endpoint and 'receipts' in request.endpoint %}aria-current="page"{% endif %}
        >
          <i class="bi bi-arrow-down-circle" aria-hidden="true"></i>
          <span class="nav-text">Receipts</span>
          {% if pending_receipts and pending_receipts > 0 %}
          <span class="badge badge-warning" aria-label="{{ pending_receipts }} pending receipts">{{ pending_receipts }}</span>
          {% endif %}
        </a>
      </li>

      <li class="nav-item" role="listitem">
        <a
          href="{{ url_for('deliveries.list_deliveries') }}"
          class="nav-link {% if request.endpoint and 'deliveries' in request.endpoint %}active{% endif %}"
          {% if request.endpoint and 'deliveries' in request.endpoint %}aria-current="page"{% endif %}
        >
          <i class="bi bi-arrow-up-circle" aria-hidden="true"></i>
          <span class="nav-text">Deliveries</span>
          {% if pending_deliveries and pending_deliveries > 0 %}
          <span class="badge badge-warning" aria-label="{{ pending_deliveries }} pending deliveries">{{ pending_deliveries }}</span>
          {% endif %}
        </a>
      </li>

      <li class="nav-item" role="listitem">
        <a
          href="{{ url_for('transfers.list_transfers') }}"
          class="nav-link {% if request.endpoint and 'transfers' in request.endpoint %}active{% endif %}"
          {% if request.endpoint and 'transfers' in request.endpoint %}aria-current="page"{% endif %}
        >
          <i class="bi bi-arrow-left-right" aria-hidden="true"></i>
          <span class="nav-text">Transfers</span>
          {% if pending_transfers and pending_transfers > 0 %}
          <span class="badge badge-warning" aria-label="{{ pending_transfers }} pending transfers">{{ pending_transfers }}</span>
          {% endif %}
        </a>
      </li>

      <li class="nav-item" role="listitem">
        <a
          href="{{ url_for('adjustments.list_adjustments') }}"
          class="nav-link {% if request.endpoint and 'adjustments' in request.endpoint %}active{% endif %}"
          {% if request.endpoint and 'adjustments' in request.endpoint %}aria-current="page"{% endif %}
        >
          <i class="bi bi-pencil-square" aria-hidden="true"></i>
          <span class="nav-text">Adjustments</span>
        </a>
      </li>

      <!-- Reports Section -->
      <li class="nav-section" role="presentation">
        <h3 class="nav-section-title">Reports</h3>
      </li>

      <li class="nav-item" role="listitem">
        <a
          href="{{ url_for('stock.view_ledger') }}"
          class="nav-link {% if request.endpoint == 'stock.view_ledger' %}active{% endif %}"
          {% if request.endpoint == 'stock.view_ledger' %}aria-current="page"{% endif %}
        >
          <i class="bi bi-clock-history" aria-hidden="true"></i>
          <span class="nav-text">Stock Ledger</span>
        </a>
      </li>

      <!-- Settings Section -->
      <li class="nav-section" role="presentation">
        <h3 class="nav-section-title">System</h3>
      </li>

      <li class="nav-item" role="listitem">
        <a
          href="{{ url_for('settings.index') }}"
          class="nav-link {% if request.endpoint and 'settings' in request.endpoint %}active{% endif %}"
          {% if request.endpoint and 'settings' in request.endpoint %}aria-current="page"{% endif %}
        >
          <i class="bi bi-gear" aria-hidden="true"></i>
          <span class="nav-text">Settings</span>
        </a>
      </li>
    </ul>
  </nav>

  <div class="sidebar-footer">
    <div class="user-info">
      <div class="user-avatar" aria-hidden="true">
        <i class="bi bi-person-circle"></i>
      </div>
      <div class="user-details">
        <a 
          href="{{ url_for('profile.view') }}" 
          class="text-decoration-none"
          aria-label="View profile for {{ session.get('full_name') or session.get('username') }}"
        >
          <div class="user-name">
            {{ session.get('full_name') or session.get('username') }}
          </div>
        </a>
        <div class="user-role" aria-label="Role: {{ session.get('user_role') }}">{{ session.get('user_role') }}</div>
      </div>
    </div>
  </div>
</aside>

<!-- Sidebar Overlay for Mobile -->
<div class="sidebar-overlay d-lg-none" id="sidebarOverlay" aria-hidden="true"></div>
