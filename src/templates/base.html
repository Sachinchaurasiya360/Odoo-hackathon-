<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Inventory Management System" />
    <title>{% block title %}Inventory Management System{% endblock %}</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css"
    />

    <!-- Custom CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/main.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/components.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/animations.css') }}"
    />

    {% block extra_css %}{% endblock %}
  </head>

  <body class="{% if not session.get('user_id') %}auth-page{% endif %}">
    {% if session.get('user_id') %}
    <!-- ================== LOGGED-IN LAYOUT START ================== -->
    <div class="app-container">
      {% include 'components/sidebar.html' %}

      <div class="main-content">
        {% include 'components/navbar.html' %}

        <!-- FLASH MESSAGES (APP) -->
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %}
        <div class="flash-messages animate-fade-in-down">
          {% for category, message in messages %}
          <div
            class="alert alert-{{ category }} alert-dismissible fade show notification-enter"
            role="alert"
          >
            <i
              class="bi bi-{% if category == 'success' %}check-circle-fill{% elif category == 'danger' %}exclamation-circle-fill{% elif category == 'warning' %}exclamation-triangle-fill{% else %}info-circle-fill{% endif %}"
            >
            </i>
            {{ message }}
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="alert"
            ></button>
          </div>
          {% endfor %}
        </div>
        {% endif %} {% endwith %}

        <div id="page-wrapper">
          {% else %}
          <!-- ================== AUTH LAYOUT START ================== -->

          <!-- FLASH MESSAGES (AUTH) -->
          {% with messages = get_flashed_messages(with_categories=true) %} {% if
          messages %}
          <div class="container mt-4">
            {% for category, message in messages %}
            <div
              class="alert alert-{{ category }} alert-dismissible fade show"
              role="alert"
            >
              {{ message }}
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="alert"
              ></button>
            </div>
            {% endfor %}
          </div>
          {% endif %} {% endwith %}

          <div class="auth-container mt-5">
            {% endif %}

            <!-- ======== COMMON CONTENT BLOCK ======== -->
            {% block content %}{% endblock %} {% if session.get('user_id') %}
            <!-- ================== LOGGED-IN LAYOUT END ================== -->
          </div>
          <!-- End page-wrapper -->

          <footer class="page-footer">
            <div class="footer-content">
              <span>&copy; 2024 Inventory Management System</span>
              <span class="footer-links">
                <a href="#">Help</a>
                <a href="#">Privacy</a>
                <a href="#">Terms</a>
              </span>
            </div>
          </footer>
        </div>
        <!-- End main-content -->
      </div>
      <!-- End app-container -->
      {% else %}
      <!-- ================== AUTH LAYOUT END ================== -->
    </div>
    <!-- End auth-container -->
    {% endif %}

    <!-- JS Files -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/sidebar.js') }}"></script>

    {% block extra_js %}{% endblock %}
  </body>
</html>
